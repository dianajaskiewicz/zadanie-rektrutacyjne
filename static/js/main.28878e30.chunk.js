(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n(68)},42:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},43:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(13),c=n.n(o),s=(n(42),n(43),n(15)),i=n(16),l=n(21),u=n(18),m=n(22),p=n(20),d="FETCH_POSTS",f="FETCH_COMMENTS_START",b="SAVE_COMMENT_TO_POST",h=function(e){return{type:"FETCH_SUCCESS",fetchedPosts:e}},E=function(e,t){return{type:"FETCH_COMMENTS_SUCCESS",fetchedComments:e,id:t}},g=function(e,t,n,a){return{type:"SEND_COMMENTS",name:e,body:t,email:n,postID:a}},y=function(){return{type:"START_FETCHING_COMMENTS"}},O=function(){return{type:"FINISH_FETCHING_COMMENTS"}},v={border:"2px solid black",width:"80%",margin:"0 auto",cursor:"pointer"},C=function(e){return r.a.createElement("div",{style:v,onClick:function(){return e.clicked(e.idPost,e.id)}},r.a.createElement("p",null,"Komentarz"),r.a.createElement("p",null,r.a.createElement("b",null,"Tytu\u0142:")," ",e.title),r.a.createElement("p",null,r.a.createElement("b",null,"Tre\u015b\u0107: "),e.body),r.a.createElement("p",null,r.a.createElement("b",null,"Email: "),e.email))},S=n(19),j={marginTop:"20px",marginBottom:"20px"},k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",body:"",email:""},n.changeInputHandler=function(e,t){n.setState(Object(S.a)({},t,e.target.value))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{style:j},r.a.createElement("input",{id:"name",type:"text",placeholder:"Imi\u0119",name:"name",value:this.state.name,onChange:function(t){return e.changeInputHandler(t,"name")}}),r.a.createElement("input",{id:"body",type:"text",placeholder:"Tre\u015b\u0107",name:"body",value:this.state.body,onChange:function(t){return e.changeInputHandler(t,"body")}}),r.a.createElement("input",{id:"email",type:"text",placeholder:"Email",name:"body",value:this.state.email,onChange:function(t){return e.changeInputHandler(t,"email")}}),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.props.clicked(e.state.name,e.state.body,e.state.email,e.props.idPost),e.setState(function(e){return{name:"",body:"",email:""}})}},"Wy\u015blij komentarz"))}}]),t}(a.Component),x=function(e){var t=null,n=null;return e.comments&&(e.loading?(t=r.a.createElement("p",{style:{fontSize:"70px"}},"\u0141adowanie"),n=null):(t=e.comments.map(function(t){return r.a.createElement(C,{key:t.id,title:t.name,body:t.body,clicked:e.clicked,idPost:e.id,id:t.id,email:t.email})}),n=r.a.createElement(k,{clicked:e.sendComment,idPost:e.id}))),r.a.createElement("article",null,r.a.createElement("h1",null,e.title),r.a.createElement("div",null,r.a.createElement("div",null,e.body,t,n)))},I={color:"black",border:"2px solid black",margin:"10px",width:"48%",display:"inline-block",padding:"15px"},T=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={elementsPerPage:20,currentPage:0},n.calculatePages=function(e){return parseInt(e)/parseInt(n.state.elementsPerPage)},n.changePage=function(e){n.setState({currentPage:e})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onFetchPosts()}},{key:"render",value:function(){var e=this,t=[];if(this.props.posts.length>0)for(var n=this.calculatePages(this.props.posts.length),a=function(n){t.push(r.a.createElement("button",{onClick:function(){return e.changePage(n)}},n+1))},o=0;o<n;o++)a(o);var c=this.props.posts.slice(this.state.elementsPerPage*this.state.currentPage,(this.state.currentPage+1)*this.state.elementsPerPage).map(function(t){return r.a.createElement("div",{style:I},r.a.createElement(x,{key:t.id,title:t.title,body:t.body,email:t.email,id:t.id,comments:t.comments,clicked:e.props.onRemoveComment,sendComment:e.props.onSendcomment,loading:e.props.loading}),r.a.createElement("button",{onClick:function(){return e.props.onFetchComments(t.id)}},"Poka\u017c komentarze"))});return r.a.createElement("div",null,r.a.createElement("div",null,t),c)}}]),t}(a.Component),M=Object(p.b)(function(e){return{posts:e.posts.posts,loading:e.posts.loading}},function(e){return{onFetchPosts:function(){return e({type:d})},onFetchComments:function(t){return e(function(e){return{type:f,id:e}}(t))},onRemoveComment:function(t,n){return e(function(e,t){return{type:"REMOVE_COMMENT",postID:e,id:t}}(t,n))},onSendcomment:function(t,n,a,r){return e(function(e,t,n,a){return{type:b,name:e,body:t,email:n,postID:a}}(t,n,a,r))}}})(T);var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M,null))},P=n(10),N=n(36),_=n(6),D={loading:!1,posts:[]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SUCCESS":return Object(_.a)({},e,{posts:t.fetchedPosts});case"FETCH_COMMENTS_SUCCESS":return Object(_.a)({},e,{posts:e.posts.map(function(e){return e.id==t.id&&(e=Object(_.a)({},e,{comments:t.fetchedComments})),e})});case"REMOVE_COMMENT":return Object(_.a)({},e,{posts:e.posts.map(function(e){return t.postID==e.id&&(e=Object(_.a)({},e,{comments:e.comments.filter(function(e){if(e.id!==t.id)return e})})),e})});case"SEND_COMMENTS":var n={name:t.name,body:t.body,email:t.email,id:1e3*Math.random()};return Object(_.a)({},e,{posts:e.posts.map(function(e){return e.id==t.postID&&e.comments.push(n),e})});case"START_FETCHING_COMMENTS":return Object(_.a)({},e,{loading:!0});case"FINISH_FETCHING_COMMENTS":return Object(_.a)({},e,{loading:!1})}return e},H=n(8),A=n.n(H),R=n(7),z=n(27),J=n.n(z),G=A.a.mark(V),U=A.a.mark(W),B=A.a.mark(K);function V(e){var t,n,a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.a.get("https://jsonplaceholder.typicode.com/posts");case 3:for(a in t=e.sent,n=[],t.data)n.push(Object(_.a)({},t.data[a]));return e.next=8,Object(R.a)(h(n));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}},G,null,[[0,10]])}function W(e){var t,n,a;return A.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(R.a)(y());case 2:return r.prev=2,r.next=5,J.a.get("https://jsonplaceholder.typicode.com/comments?postId="+e.id);case 5:for(a in t=r.sent,n=[],t.data)n.push(Object(_.a)({id:e.id},t.data[a]));return r.next=10,Object(R.a)(E(n,e.id));case 10:return r.next=12,Object(R.a)(O());case 12:r.next=16;break;case 14:r.prev=14,r.t0=r.catch(2);case 16:case"end":return r.stop()}},U,null,[[2,14]])}function K(e){var t;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],n.next=3,localStorage.getItem("postID");case 3:if(n.sent){n.next=12;break}return t.push(e.postID),n.next=8,localStorage.setItem("postID",JSON.stringify(t));case 8:return n.next=10,Object(R.a)(g(e.name,e.body,e.email,e.postID));case 10:n.next=25;break;case 12:return n.next=14,JSON.parse(localStorage.getItem("postID"));case 14:if(t=n.sent,!t.includes(e.postID)){n.next=20;break}alert("Nie mo\u017cesz doda\u0107 dw\xf3ch komentarzy do jednego posta!"),n.next=25;break;case 20:return t.push(e.postID),n.next=23,Object(R.a)(g(e.name,e.body,e.email,e.postID));case 23:return n.next=25,localStorage.setItem("postID",JSON.stringify(t));case 25:case"end":return n.stop()}},B)}var $=A.a.mark(q);function q(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.b)(d,V);case 2:return e.next=4,Object(R.b)(f,W);case 4:return e.next=6,Object(R.b)(b,K);case 6:case"end":return e.stop()}},$)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=Object(P.c)({posts:F}),Q=Object(N.a)(),X=Object(P.e)(L,Object(P.a)(Q));Q.run(q),c.a.render(r.a.createElement(p.a,{store:X},r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.28878e30.chunk.js.map